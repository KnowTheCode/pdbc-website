!function($,window,document,undefined){"use strict";function init(){$window=$(window),$body=$("body"),initPanel(),initPickers()}function initPanel(){$container=$(".iam-picker-panel"),slideIn=$container.data("slidein"),slideOut=$container.data("slideout"),$(".iam-picker-panel--close-button").on("click",closeContainer),openButton.$el=$(".iam-picker--open-button"),openButton.$text=openButton.$el.find(".iam--selection"),openButton.$el.on("click",clickHandler)}function initPickers(){return $pickers=$container.find(".ima-picker"),$pickers.on("click",iamClickHandler),(currentExperience=getCookie())?($pickers.each(function(){setIAMButtonStates($(this))}),void(isUXSelected||changeUXExperience())):void openContainer()}function closeContainer(){$container.removeClass(slideIn).addClass(slideOut),bodyClassHandler(!1)}function openContainer(){$container.addClass(slideIn).removeClass(slideOut),$body.addClass("iam__open")}function bodyClassHandler(isOpening){setTimeout(function(){isOpening?$body.addClass("iam__open"):$body.removeClass("iam__open")},1e3)}function changeUXExperience(){openButton.$el.attr("data-iam-current",currentExperience),openButton.$text.text(currentExperience),$body.removeClass("iam--entrepreneur iam--developer").addClass("iam--"+currentExperience),$pickers.each(function(){setIAMButtonStates($(this))}),setCookie(currentExperience),closeContainer()}function requestNewContent(){var data={iam:currentExperience,post_id:iamParameters.post_id},$spinner=$(".wait-spinner");$.ajax({method:"POST",url:iamParameters.iam_url+"/iam/",data:data,beforeSend:function(xhr){xhr.setRequestHeader("X-WP-Nonce",iamParameters.iam_nonce),$spinner.show()},success:function(response){$spinner.hide(),response.content?(changeContent(response.entryClassname,response.content),changeUXExperience()):console.log("whoopsie, no content")},fail:function(response){console.log(response)}})}function isUXSelected(){if(!currentExperience)return!1;return $body.hasClass("bodyClassname")}function getCookie(){return document.cookie.replace(/(?:(?:^|.*;\s*)_pdbc_ux_iam\s*\=\s*([^;]*).*$)|^.*$/,"$1")}function setCookie(cookieValue){var dateObj=new Date;dateObj.setTime(dateObj.getTime()+31536e6);var expires="; expires="+dateObj.toUTCString();document.cookie=cookieName+"="+cookieValue+expires}var $window,$body,$container,slideIn,slideOut,$pickers,currentExperience,openButton={$el:null,$text:null},cookieName="_pdbc_ux_iam",clickHandler=function(){$body.hasClass("iam__open")?closeContainer():openContainer()},iamClickHandler=function(){var $picker=$(this),newIAM=$picker.data("iam");newIAM!=currentExperience&&(currentExperience=newIAM,requestNewContent(newIAM))},changeContent=function(entryClassname,content){var $article=$(entryClassname);"undefined"==typeof $article||$article.length<1||($article.empty(),$article.html(content))},setIAMButtonStates=function($picker){var currentValue=$picker.attr("data-iam-current"),shouldBeValue=$picker.attr("data-iam")==currentExperience?"active":"inactive";currentValue!=shouldBeValue&&$picker.attr("data-iam-current",shouldBeValue)};$("document").ready(function(){init()})}(jQuery,window,document);